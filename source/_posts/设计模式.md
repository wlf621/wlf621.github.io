---
title: 设计模式
date: 2020-08-08 16:22:10
mathjax: true
tags:
- 设计模式
---

### 单例模式

#### 懒汉式

```c++
class single {
private:
    int a;
    single() = default;
    static single *instance;
public:
    static single* getInstance() {
        return instance;
    }
    void change(int a) {
        this->a = a;
    }
};

single*  single::instance = new single();
```



#### 饿汉式

```c++
mutex mtx;

class single {
private:
    int a;
    single() = default;
    static single *instance;
public:
    static single* getInstance();
    void change(int a) {
        this->a = a;
    }
};

single*  single::instance = nullptr;
single* single::getInstance() {
    if (instance == nullptr) {
        lock_guard<mutex> lck(mtx);
        if (instance == nullptr) {
            instance = new single();
            return instance;
        }
    }
    else return instance;
}
```

### 工厂模式

#### 简单工厂模式（静态工厂模式）

```c++
class Car {
public:
    virtual void name() {

    }
};

class WuLing : public Car {
public:
    void name() { cout << "WuLing..." << endl; }
};

class Tesla : public Car {
public:
    void name() { cout << "Tesla..." << endl; }
};

class CarFactory {
public:
    static Car* getCar(string str) {
        if (str == "WuLing") {
            return new WuLing();
        }
        else if (str == "Tesla") {
            return new Tesla();
        }
        else return nullptr;
    }
};

int main() {
    Car *cur = CarFactory::getCar("Tesla");
    cur->name();
    return 0;
}
```

